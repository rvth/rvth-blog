<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="date" content="2020-08-06" />
    <meta name="tags" content="SEO, Python" />
    <meta name="authors" content="Ruth" />
    <title>An Introduction to Using Google Trends with Python</title>
</head>
<body>
<p><a href="https://pypi.org/project/pytrends/"> Pytrends</a> is the unofficial API for Google Trends that allows you to automate the process of downloading different reports from Google Trends and can be used within Python to collect data using the different methods available within the API.</p>

<p>Google Trends is a free resource created by Google that analyses and lists the trending search terms over a period of time, across different regions and timezones, along with suggestions for keywords and topics based on a given term.</p>

<p>I have been playing around with this for a couple of weeks and wanted to share some of the interesting ways it can be used for SEO purposes. This first post will be an introduction to the API and the methods available, followed by the second part which will cover how to visualise the data.</p>

<p>Before starting we need to install the required packages and libraries and connect to Google. I have also added some additional libraries to help store and visualise the data.</p>
<script src="https://gist.github.com/rvth/f1c8e3c96cfe608c5e6c0f528b652311.js"></script>

<h2>Build payload</h2>
<p>Now we have all the necessary packages installed, we can start coding! Next we need build the payload which will allow us to enter parameters such as our keyword list, the timeframe to collect data, a region and timezone, as well as narrowing down further to a specific category.</p>

<h3>Parameters to add</h3>
<p>There are several parameters you can add to your payload, however the only required one is the keyword list where you can add the keywords you want to get data for. You can add up to 5 terms in a list, which is created like this:</p>

<script src="https://gist.github.com/rvth/f161294747b184290cb989b887d210c2.js"></script>

<p>Other parameters include:</p>

<ul>
    <li><code>timeframe</code> - While this isn‚Äôt mandatory, as it will default to the last 5 years, you can set a timeframe you want to collect data from. You can do this in a couple of different ways:
        <ul>
            <li>With specific dates set in a YYYY-MM-DD YYYY-MM-DD format. E.g. 2020-02-27 2020-03-27</li>
            <li>Current time minus the number of months using the format ‚Äòtoday #-m‚Äô where # is the number of months from the date you want to collect data from. E.g. ‚Äòtoday 2-m‚Äô will collect data from today to 2 months ago.</li>
            <li>Current time minus the number of days using the format ‚Äònow #-d‚Äô where # is the number of days from the date you want to collect data from. E.g. ‚Äònow 7-d‚Äô to collect data from the last 7 days. Note this seems to only work for 1-7 days.</li>
        </ul>
    <li><code>cat</code> - Allows you to use a category to narrow down results, this uses the integer for the category, which you can find <a href = ‚Äòhttps://github.com/pat310/google-trends-api/wiki/Google-Trends-Categories‚Äô> here</a>. This isn‚Äôt compulsory, as it will default to no category.</li>
    <li> <code>geo</code> - Allows you to narrow down to a specific country, using the two letter country abbreviation, eg ‚ÄòGB‚Äô. Again this isn‚Äôt compulsory, as it will default to ‚ÄòWorld‚Äô.</li>
    <li><code>gprop</code> - The Google property you want to filter to (images, news, YouTube, Google Shopping). This will default to web search.</li>
</ul>

<p>So say for example I want to collect data over the last year for the popularity of searches for my 3 favourite k-pop groups, using the music category (35), in the US, I would build my payload as follows:</p>

<script src="https://gist.github.com/rvth/cec23cdaffb19ebde7b3fd8da65e66c7.js"></script>

<h2>API Methods</h2>
<p>Now for the fun bit, collecting different types of data. There are several API methods you can use with the Pytrends library, which you can find more about <a href=‚Äùhttps://pypi.org/project/pytrends/#api-methods‚Äù> here</a> but I‚Äôm just going to share a few which may be most useful for SEO use cases.</p>

<h3>Interest over time</h3>

<p>This will return historical data for when a keyword was searched for the most, over the timeframe you select. This is reflective of what is shown in the 'interest over time' section of Google Trends.</p>

<p>For this example I have created a keyword list of five dog breeds to see how the search volume for these terms has changed over the last 3 months. I also turned the results given into a Pandas DataFrame in order to analyse the data easily.</p>
<script src="https://gist.github.com/rvth/403eca7121f5bbe68cf5571c74509c10.js"></script>

<p>This will generate a DataFrame with a column for each date, and each search term in my keyword list, with the search volume for each day.</p>

<div class="image"><img src="/images/interest-overtime.webp" class="lazyload" alt="interest-over-time-df" width="700px"</div>


<h3>Interest by region</h3>

<p>Using this method we will be able to see data for where a keyword is most searched for. There are a couple of different parameters you can add to this:</p>

<ul>
    <li><code>resolution</code> - Can be set to CITY, COUNTRY or REGION.</li>
    <li> <code>inc_low_vol</code> - Either a True or False boolean to determine whether to display data for low volume countries.</li>
    <li><code>inc_geo_code</code> - This can also be set to either True or False, depending on whether you want to include ISO codes along with the country names.</li>
</ul>

<p>I have two examples of this method, the first with no parameters, which displays all countries and the interest of the search term across these.</p>

<script src="https://gist.github.com/rvth/a1fd807377ae3c5b024d5df8d7bb089c.js"></script>

<p>The other displays region level data for the country Geo code 'GB'.</p>

<script src="https://gist.github.com/rvth/223ed65d7b33ce3185d2e7599b8c5641.js"></script>

<h3>Related queries</h3>

<p>This will return data for keywords related to the provided keyword, and the output is displayed in two parts:</p>
<ul>
    <li>Top: Which displays a Google Trends score between 0-100.</li>
    <li>Rising: Displays how much interest the keyword has increased by in a %.</li>
</ul>

<p>For this example, my keyword list contains 5 endangered animals from the WWF site, where I collect the values for all of the terms. I will then use the <code>.get</code> method to display the rising and top values for a selected keyword.</p>

<script src="https://gist.github.com/rvth/e425f04aa3c395ffe144bb87d223ec46.js"></script>

<div class="image"><img src="/images/related-queries-rising.webp" class="lazyload" alt="related-queries-rising-df" width="400px"</div>

<h3>Suggestions</h3>

<p>The suggestions method will display a list of additional suggested keywords that can also be used for a trend search.</p>

<p>In my example I have defined a keyword within the method and displayed the results as a dataframe.</p>

<script src="https://gist.github.com/rvth/2e75a6308cc86deaa4b7762c2885bf37.js"></script>

<div class="image"><img src="/images/suggestions.webp" class="lazyload" alt="suggestions-df" width="500px"</div>


<h3>Trending searches</h3>

<p>The final method I want to share is the trending searches. This will return data for the latest trending searches, either worldwide or for the country you include within the method.</p>

<script src="https://gist.github.com/rvth/90d98d4cc5847d3a90ac5d002be1bfec.js"></script>

<p>I also shared an example of a Google Data Studio dashboard I have created using the trending searches method for both the UK and US, which can be updated daily.</p>

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Just because I&#39;m a bit of a nerd and wanted to try out the Google Trends API in Python I now have a dashboard displaying the top 20 trending searches in the UK and US every day. It literally serves no purpose except for some occasional lols ü§∑‚Äç‚ôÄÔ∏è <a href="https://t.co/CUB0d8xgsG">pic.twitter.com/CUB0d8xgsG</a></p>&mdash; Ruth‚Å∑ (@rvtheverett) <a href="https://twitter.com/rvtheverett/status/1285305449819111425?ref_src=twsrc%5Etfw">July 20, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>I hope this has provided a good introduction to the Pytrends API and how it can be used in Python to find some interesting data for different search terms. The most powerful part of this though is the visulisations we can create from the data. The concluding part of this post will share how I use the Python libraries MatPlotLib and Seaborn to create visulations, as well as how to connect the data to Google Sheets in order to display results within a Google DataStudio dashboard.</p>

<p>You can find a Google Colab notebook <a href="https://colab.research.google.com/drive/10t-AbNxx1G8kaHSjrkyXlfs2Yl-NSuiq?usp=sharing"> here</a>, with the examples shared above if you would like to save and use as a starting point.</p>

<p>If you have any questions, or suggestions, feel free to get in touch with me on Twitter <a href="https://twitter.com/rvtheverett"> @rvtheverett</a></p>
</body>
</html>